function setUpLoader(){Ad.loader.container=document.getElementById("preloader");for(var e=0;12>e;e++){var t=document.createElement("div");t.className="preloader-stalk",Ad.loader.container.appendChild(t)}Ad.loader.fields=document.getElementsByClassName("preloader-stalk");for(var i=20,a=Ad.loader.container.clientWidth,d=Ad.loader.container.clientHeight,n=0,r=2*Math.PI/Ad.loader.fields.length,e=0;Ad.loader.fields.length>e;e++){var o=Math.round(a/2+i*Math.cos(n)-Ad.loader.fields[e].clientWidth/2),s=Math.round(d/2+i*Math.sin(n)-Ad.loader.fields[e].clientHeight/2);Ad.loader.fields[e].style.left=o+"px",Ad.loader.fields[e].style.top=s+"px",Ad.loader.fields[e].style.webkitTransform="rotate("+30*(e+3)+"deg)",Ad.loader.fields[e].style.mozTransform="rotate("+30*(e+3)+"deg)",Ad.loader.fields[e].style.msTransform="rotate("+30*(e+3)+"deg)",Ad.loader.fields[e].style.oTransform="rotate("+30*(e+3)+"deg)",Ad.loader.fields[e].style.transform="rotate("+30*(e+3)+"deg)",n+=r}}function moveLoader(){var e=0;Ad.loader.timer=window.setInterval(function(){Ad.loader.fields[e].className="preloader-stalk",11==e?e=0:e++,Ad.loader.fields[e].className="preloader-stalk preloader-stalk-active",Ad.loader.fields[e].style.transition||(Ad.loader.fields[e].style.webkitTransition="0.1s",Ad.loader.fields[e].style.mozTransition="0.1s",Ad.loader.fields[e].style.oTransition="0.1s",Ad.loader.fields[e].style.transition="0.1s")},100)}function stopAndHideLoader(){clearInterval(Ad.loader.timer),Ad.loader.container.style.display="none"}function Anim(e,t,i){function a(){return s+=Ad.variables[i].stepVar*o}Ad.effectVHS.deliberateAnim=!0;var d=0,n=Ad.variables[i].speed,r=Ad.effectVHS.deliberateAnims.length,o=t.canvas.height/n,s=t.canvas.height;"AnimIn"==i&&(s=0),Ad.proxyVars.blipFrequency=100,Ad.proxyVars.blipEffect=50,this.loop=function(){e.ctx.drawImage(t.canvas,0,0,Ad.config.width,Ad.config.height,0,(t.canvas.height-s)/2,t.canvas.width,s),n>d?(s=a(),d++):(Ad.proxyVars.blipFrequency=Ad.variables.blipFrequency,Ad.proxyVars.blipEffect=Ad.variables.blipEffect,Ad.config.curCanvas="AnimIn"==i?t:null,Ad.effectVHS.deliberateAnims.splice(r,1),Ad.effectVHS.deliberateAnim=!1)},Ad.effectVHS.deliberateAnims.push(this)}var superTween={fn:{},useCSS:!1,availAttr:["opacity","x","y","scaleY","scaleX","rotate"]},JSTween={updateRate:30,loopTimer:null,curAnims:[]};superTween.init=function(){if(domPrefixes="Webkit Moz ms O".split(" "),elem=document.createElement("div"),superTween.useCSS===!1){featurenameCapital="Transition";for(var e=0;domPrefixes.length>e&&void 0===elem.style[domPrefixes[e]+featurenameCapital];e++);}},superTween.superLoop=function(e,t,i){superLoop&&superLoop.runSuperLoop(e,t,i)},superTween.killSuperLoop=function(e){superLoop&&superLoop.killSuperLoop(e)},superTween.to=function(e,t,i){t=1e3*t,i.delay=1e3*i.delay;var a=superTween.fn.setupTween(e,t,i);superTween.useCSS&&CSSTween?CSSTween.applyCSSTransition(a):(JSTween.curAnims.push(a),JSTween.loopTimer||(JSTween.loopTimer=setTimeout(JSTween.tweenLoop,JSTween.updateRate)))},superTween.killAll=function(){clearTimeout(JSTween.loopTimer),JSTween.curAnims=[];for(var e in CSSTween.curAnims)for(var t in CSSTween.tweenStyles)CSSTween.curAnims[e].elem.style[t]=null;superLoop&&superLoop.killAllSuperLoop()},superTween.fn.setupTween=function(e,t,i){i.ease||(i.ease="Sine.easeInOut");var a=i.ease.split("."),d="";d=superTween.useCSS?CSSEase[a[0]][a[1]]:JSEase[a[0]][a[1]];var n={attr:superTween.fn.getAttr(e,i),elem:e,ease:d,rawObj:i,rawTime:t,rawDelay:i.delay,d:Math.floor(t/JSTween.updateRate),delaySteps:Math.floor(i.delay/JSTween.updateRate),curDel:!1,curDelStep:0,t:0,onComplete:i.onComplete,onCompleteParams:i.onCompleteParams};return n.delaySteps>0&&(n.curDel=!0),n},superTween.fn.getAttr=function(e,t){for(var i=[],a=0;superTween.availAttr.length>a;a++){var d=superTween.availAttr[a];if(null!==t[d]&&void 0!==t[d]){var n={};n.attr=superTween.availAttr[a],n.b=superTween.fn.getPos(e,n.attr,t[n.attr]),n.c=superTween.fn.getTarg(n.attr,t[n.attr],n.b,e),i.push(n)}}return i},superTween.fn.getPos=function(e,t,i){switch(t){case"x":return e.offsetLeft;case"y":return e.offsetTop;case"scaleX":var a=e.getAttribute("data-startW"),d=e.offsetWidth;return e.setAttribute("data-prevW",d),a||e.setAttribute("data-startW",d),d;case"scaleY":var n=e.getAttribute("data-startH"),r=e.offsetHeight;return e.setAttribute("data-prevH",r),n||e.setAttribute("data-startH",r),r;case"opacity":return"getComputedStyle"in window?parseInt(window.getComputedStyle(e,null).getPropertyValue("opacity")):i>0?0:1;case"rotate":if("getComputedStyle"in window){var o=window.getComputedStyle(e,null),s=o.getPropertyValue("-webkit-transform")||o.getPropertyValue("-moz-transform")||o.getPropertyValue("-ms-transform")||o.getPropertyValue("-o-transform")||o.getPropertyValue("transform");if("none"!=s&&s){var l=s.split("(")[1].split(")")[0].split(","),c=l[0],A=l[1],u=(l[2],l[3],Math.sqrt(c*c+A*A),Math.round(Math.atan2(A,c)*(180/Math.PI)));return u}return 0}return i>0?0:180}},superTween.fn.getTarg=function(e,t,i,a){return"x"==e||"y"==e||"opacity"==e||"rotate"==e?t-i:"scaleX"==e?t*a.getAttribute("data-startW")-i:"scaleY"==e?t*a.getAttribute("data-startH")-i:void 0},JSTween.tweenLoop=function(){var e=JSTween.curAnims;for(i=0;e.length>i;i++)if(e[i].curDel)e[i].curDelStep++,e[i].curDelStep>e[i].delaySteps&&(e[i].curDel=!1);else{for(var t=0;e[i].attr.length>t;t++){var a={t:e[i].t,d:e[i].d,b:e[i].attr[t].b,c:e[i].attr[t].c},d=e[i].ease(a);JSTween.setPos(e[i].elem,e[i].attr[t],d)}if(e[i].t++,e[i].t>e[i].d){if(e[i].onComplete)var n=e[i].onComplete,r=e[i].onCompleteParams;e.splice(i,1),n&&n.apply(this,r)}}0!=e.length?JSTween.loopTimer=setTimeout(JSTween.tweenLoop,JSTween.updateRate):(clearTimeout(JSTween.loopTimer),JSTween.loopTimer=null)},JSTween.setPos=function(e,t,i){switch(t.attr){case"x":e.style.left=i+"px";break;case"y":e.style.top=i+"px";break;case"scaleX":e.style.width=i+"px";break;case"scaleY":e.style.height=i+"px";break;case"opacity":e.style.opacity=i,"filters"in e&&e.filters.item;break;case"rotate":e.style.webkitTransform="rotate("+i+"deg)",e.style.mozTransform="rotate("+i+"deg)",e.style.msTransform="rotate("+i+"deg)",e.style.oTransform="rotate("+i+"deg)",e.style.transform="rotate("+i+"deg)"}},superTween.init();var JSEase={Expo:{},Quint:{},Quart:{},Cubic:{},Linear:{easeNone:function(e){return e.c*e.t/e.d+e.b}},Sine:{easeIn:function(e){return e.c*(1-Math.cos(e.t/e.d*(Math.PI/2)))+e.b},easeOut:function(e){return e.c*Math.sin(e.t/e.d*(Math.PI/2))+e.b},easeInOut:function(e){return e.c/2*(1-Math.cos(Math.PI*e.t/e.d))+e.b}},Elastic:{},Back:{easeOut:function(e,t){return void 0==t&&(t=1.70158),e.c*((e.t=e.t/e.d-1)*e.t*((t+1)*e.t+t)+1)+e.b},easeIn:function(e,t){return void 0==t&&(t=1.70158),e.c*(e.t/=e.d)*e.t*((t+1)*e.t-t)+e.b}},Bounce:{easeOut:function(e){return 1/2.75>(e.t/=e.d)?7.5625*e.c*e.t*e.t+e.b:2/2.75>e.t?e.c*(7.5625*(e.t-=1.5/2.75)*e.t+.75)+e.b:2.5/2.75>e.t?e.c*(7.5625*(e.t-=2.25/2.75)*e.t+.9375)+e.b:e.c*(7.5625*(e.t-=2.625/2.75)*e.t+.984375)+e.b}},Quad:{},Circ:{}},CSSTween={counter:0,curAnims:{},vendorPrefixs:["webkit","Moz"]};CSSTween.applyCSSTransition=function(e){CSSTween.curAnims["anim"+CSSTween.counter]=e,e.elem.setAttribute("data-tweenNum","anim"+CSSTween.counter),e.elem.setAttribute("data-tweenEnd","false"),CSSTween.counter++,CSSTween.tweenStyles={top:"",left:"",width:"",height:"",opacity:"",transitionDuration:"",transitionProperty:"",transform:"",transitionTimingFunction:e.ease,transitionend:"",transitionDelay:0};for(var t="",i="",a=0;e.attr.length>a;a++){var d=CSSTween.naming(e,a);d.transform?i=d.transform+" "+i:CSSTween.tweenStyles[d.cssVar]=d.value,t+=d.cssVar+", "}CSSTween.tweenStyles.transform=i,CSSTween.tweenStyles.transitionDuration=e.rawTime/1e3+"s",CSSTween.tweenStyles.transitionProperty=t,CSSTween.tweenStyles.transitionDelay=e.rawDelay?e.rawDelay/1e3+"s":"0s",CSSTween.vendorPrefix(["transitionDelay","transform","transitionDuration","transitionProperty","transitionTimingFunction"],CSSTween.tweenStyles);for(var n in CSSTween.tweenStyles)CSSTween.tweenStyles[n]||(CSSTween.tweenStyles[n]=null),e.elem.style[n]=CSSTween.tweenStyles[n];e.elem.addEventListener("webkitTransitionEnd",CSSTween.completeHandler,!1),e.elem.addEventListener("mozTransitionEnd",CSSTween.completeHandler,!1),e.elem.addEventListener("msTransitionEnd",CSSTween.completeHandler,!1),e.elem.addEventListener("transitionend",CSSTween.completeHandler,!1)},CSSTween.completeHandler=function(e){var t=e.srcElement||e.originalTarget,i=t.getAttribute("data-tweenEnd");if("false"==i){t.setAttribute("data-tweenEnd","true"),t.removeEventListener("webkitTransitionEnd",CSSTween.completeHandler,!1),t.removeEventListener("mozTransitionEnd",CSSTween.completeHandler,!1),t.removeEventListener("msTransitionEnd",CSSTween.completeHandler,!1),t.removeEventListener("transitionend",CSSTween.completeHandler,!1);var a=t.getAttribute("data-tweenNum"),d=CSSTween.curAnims[a].onComplete;CSSTween.transitionList={};var n=["transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction"];CSSTween.vendorPrefix(n,CSSTween.transitionList);for(var r=0;n.length>r;r++)CSSTween.transitionList[n[r]]="";for(var o in CSSTween.transitionList)t.style[o]="";d&&d.apply(this,CSSTween.curAnims[a].onCompleteParams),delete CSSTween.curAnims[a]}},CSSTween.naming=function(e,t){obj=e.attr[t];var i={cssVar:obj.attr,value:e.rawObj[obj.attr],transform:null};if("x"==obj.attr||"y"==obj.attr||"width"==obj.attr||"height"==obj.attr)"x"==obj.attr&&(i.cssVar="left"),"y"==obj.attr&&(i.cssVar="top"),i.value+="px";else if("transitionDuration"==obj.attr)i.value+="s";else if("delay"==obj.attr)i.value+="s";else if("rotate"==obj.attr)i.transform=obj.attr+"("+i.value+"deg)";else if("scaleX"==obj.attr||"scaleY"==obj.attr){var a=e.rawObj[obj.attr];i.transform=obj.attr+"("+a+")"}return i},CSSTween.vendorPrefix=function(e,t){for(var i=0;e.length>i;i++)for(var a=0;CSSTween.vendorPrefixs.length>a;a++){var d=CSSTween.vendorPrefixs[a]+e[i].charAt(0).toUpperCase()+e[i].slice(1);t[d]=CSSTween.tweenStyles[e[i]]}},CSSEase={Expo:{},Quint:{},Quart:{},Cubic:{},Linear:{easeNone:"linear"},Sine:{easeIn:"cubic-bezier(0.47, 0, 0.745, 0.715)",easeOut:"cubic-bezier(0.39, 0.575, 0.565, 1)",easeInOut:"cubic-bezier(0.445, 0.050, 0.550, 0.950)"},Elastic:{},Back:{easeIn:"cubic-bezier(0.6, -0.28, 0.735, 0.045)",easeOut:"cubic-bezier(0.175, 0.885, 0.32, 1.275)"},Bounce:{easeOut:"cubic-bezier(0.765, 1.850, 0.235, 0.510)"},Quad:{},Circ:{}};var superLoop={config:{superLoopTimers:{}}};superLoop.runSuperLoop=function(e,t,i){var a=1,d=1;null==i.bgOffset&&(i.bgOffset=0),superLoop.config.superLoopTimers[e.id]=window.setInterval(function(){e.style.backgroundPosition="horizontal"==i.direction?-(i.stepSize*d)+"px "+i.bgOffset+"px":i.bgOffset+" "+-(i.stepSize*d)+"px",d++,d==i.numSteps&&("infinite"==t?(e.style.backgroundPositionX="0px",e.style.backgroundPositionY="0px",d=1):t>a?(e.style.backgroundPositionX="0px",e.style.backgroundPositionY="0px",d=1,a++):window.clearInterval(superLoop.config.superLoopTimers[e.id]))},i.interval)},superLoop.killSuperLoop=function(e){e.style.backgroundPositionY="0px",e.style.backgroundPositionX="0px",window.clearInterval(superLoop.config.superLoopTimers[e.id])},superLoop.killAllSuperLoop=function(){for(var e in superLoop.config.superLoopTimers)document.getElementById(e).style.backgroundPositionY="0px",window.clearInterval(superLoop.config.superLoopTimers[e])};var Ad=Ad||{};Ad.config=Ad.config||{},Ad.config.width=970,Ad.config.height=250,Ad.config.debugMode=!1,Ad.config.adRunning=!0,Ad.config.curLoop=1,Ad.config.maxLoop=1,Ad.config.onloadFired=!1,Ad.config.isIE9=!1,Ad.config.stepTimer=null,Ad.variables=Ad.variables||{frameCounter:0,bgFill:"#fff200",f2TextSize:25,f3TextSize:80,f3TXTextSize:25,f1XOffset:50,copyLineSpace:8,wrapWidth:.8,fontSize:50,copyFill:"#151613",copyAlpha:.8,copyRgbOffset:1,copyRgbColours:["red","blue","green","black"],copyRgbOpacity:.3,textAlign:"leftAligned",bgAnimType:"warp",bgAnimFreq:1,bgWarpThresholdX:20,bgWarpThresholdY:10,syncWarpThresh:20,syncWarpVariance:1,AnimIn:{speed:5,stepVar:1},AnimOut:{speed:5,stepVar:-1},maxXVariant:1,maxYVariant:0,chunksize:1,isBlip:!1,blipFrequency:1,blipAffect:["maxXVariant","maxYVariant"],blipEffect:7,blipLength:7,shuffleBlip:!0,shuffleBlipOffset:3,shuffleBlipChance:5,includeNoise:!0,noiseXVariant:300,noiseYVariant:1,noiseFreq:7,noiseAlpha:.5,currentStaticDir:"down",includeStaticLine:!0,staticLineRandom:!0,staticRandomChance:35,staticLineSpeed:180,staticLineAOE:26,staticLineStepVal:.5,staticLineVisible:!1,staticLineVariance:1,staticLineStart:100,staticLineEnd:150};var Ad=Ad||{};Ad.dcVid=Ad.dcVid||{},Ad.dcVid.loadVideos=function(){for(var e=[{id:"trailerVid",srcURL:Ad.dateLogic.outcome.videoSrc,container:Ad.dom.trailerVidContainer,poster:"img_poster.jpg",controls:!0,muted:!1,activeVideo:!0}],t=0;e.length>t;t++){var i=new studio.sdk.rad.Video({id:e[t].id,controls:e[t].controls,muted:e[t].muted,sources:[e[t].srcURL+".mp4",e[t].srcURL+".webm",e[t].srcURL+".ogv"]});i.setElement(e[t].container),Ad.dom[e[t].id]=i.getVideoElement(),Ad.dom[e[t].id].id=e[t].id,e[t].activeVideo&&Ad.dcVid.setupActiveVideo(Ad.dom[e[t].id])}},Ad.dcVid.setupActiveVideo=function(e){Ad.log("setupActiveVideo"),e?(Ad.activeVideo=e,studio.video.Reporter.attach(e.id,Ad.activeVideo),Ad.dom.ctaVid.addEventListener("click",Ad.dcVid.startVid),Ad.activeVideo.addEventListener("click",Ad.dcVid.startVidWindows),Ad.activeVideo.addEventListener("play",Ad.dcVid.vidStatus),Ad.activeVideo.addEventListener("playing",Ad.dcVid.vidStatus),Ad.activeVideo.addEventListener("pause",Ad.dcVid.vidStatus),Ad.activeVideo.addEventListener("ended",Ad.dcVid.vidStatus),Ad.activeVideo.style.visibility="visible"):Ad.log("setting up active video went wrong....")},Ad.dcVid.startVid=function(e){Ad.log("playing video. TrailerVideo: "+Ad.activeVideo),superTween.killSuperLoop(Ad.dom.trailerSuperLoop),Ad.dom.trailerSuperLoop.style.visibility="hidden",Ad.dom.trailerSuperLoop.style.display="none",Ad.utils.hide([Ad.dom.ctaVid,Ad.dom.vidPoster,Ad.dom.tint]),Ad.activeVideo.style.top="0px",Ad.activeVideo.play(),"ctaVidReplay"==e.target.className?(Ad.log("counter = ctaVidReplay"),Enabler.counter("Replay",!0)):(Ad.log("counter = ctaVid"),Enabler.counter("Play with sound",!0))},Ad.dcVid.startVidWindows=function(){navigator.userAgent.indexOf("Windows Phone")>-1&&Ad.activeVideo.play()},Ad.dcVid.stopVid=function(){Ad.log("pausing video"),Ad.activeVideo&&Ad.activeVideo.pause()},Ad.dcVid.vidStatus=function(e){switch(Ad.log("vidStatus "+e.type),superTween.killSuperLoop(Ad.dom.trailerSuperLoop),Ad.dom.trailerSuperLoop.style.visibility="hidden",Ad.dom.trailerSuperLoop.style.visibility="hidden",Ad.dom.trailerSuperLoop.style.display="none",e.type){case"playing":Ad.utils.hide([Ad.dom.ctaVid,Ad.dom.vidPoster,Ad.dom.tint]),Ad.activeVideo.style.top="0px";break;case"ended":Ad.utils.show([Ad.dom.ctaVid,Ad.dom.vidPoster,Ad.dom.tint]),ctaVid.className="ctaVidReplay",Ad.activeVideo.style.top="-9999px"}};var Ad=Ad||{};Ad.loader=Ad.loader||{},setUpLoader(),moveLoader(),Ad.dateLogic=Ad.dateLogic||{},Ad.dateLogic.getDate=function(){var e={preTxEp1Dated1:{videoSrc:"c4_hunted_fugitive_20sec_Pre_TX_Ep_1_Dated1",txCopyLine:Ad.dynamicContent.Pre_TX_Ep_1_Dated1},preTxEp1Dated2:{videoSrc:"c4_hunted_fugitive_20sec_Pre_TX_Ep_1_Dated2",txCopyLine:Ad.dynamicContent.Pre_TX_Ep1_Dated2},tomorrowTxEp1:{videoSrc:"c4_hunted_fugitive_20sec_Tomorrow_TX_Ep1",txCopyLine:Ad.dynamicContent.Tomorrow_TX_Ep1},dayOfTxEp1:{videoSrc:"c4_hunted_fugitive_20sec_Day_of_TX_Ep1",txCopyLine:Ad.dynamicContent.Day_of_TX_Ep1},postTxEp1:{videoSrc:"c4_hunted_fugitive_20sec_Post_TX_Ep1",txCopyLine:Ad.dynamicContent.Post_TX_Ep1},preTxEp2:{videoSrc:"",txCopyLine:""},tomorrowTxEp2:{videoSrc:"",txCopyLine:""},dayOfTxEp2:{videoSrc:"",txCopyLine:""},postTxEp2:{videoSrc:"",txCopyLine:""},preTxEp3:{videoSrc:"",txCopyLine:""},tomorrowTxEp3:{videoSrc:"",txCopyLine:""},dayOfTxEp3:{videoSrc:"",txCopyLine:""},postTxEp3:{videoSrc:"",txCopyLine:""},backup:{videoSrc:"c4_hunted_fugitive_20sec_Post_TX_Ep1",txCopyLine:Ad.dynamicContent.Post_TX_Ep1}},t=new Date,i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],d=t.getFullYear(),n=i[t.getMonth()],r=t.getDate();a[t.getDay()];var o=e.backup;2015==d&&("Aug"==n?o=e.preTxEp1Dated1:"Sep"==n&&(5>=r?o=e.preTxEp1Dated1:6==r||7==r||8==r?o=e.preTxEp1Dated2:9==r?o=e.tomorrowTxEp1:10==r?o=e.dayOfTxEp1:r>10&&(o=e.postTxEp1))),Ad.log('Datelogic is showing "'+o.txCopyLine+'" copy & "'+o.videoSrc+'"'),Ad.dateLogic.outcome=o};var Ad=Ad||{};Ad.adMain=Ad.adMain||{},Ad.dom=Ad.dom||{},Ad.adMain.politeInit=function(){Ad.log("politeInit"),Ad.dynContent.getDynamic(),Ad.adMain.setupDOM(),Ad.dateLogic.getDate(),Ad.dcVid.loadVideos(),Ad.adMain.setAllCanvas(),Ad.proxyVars={};for(var e=["maxXVariant","maxYVariant","chunksize","wiggleBiasX","blipFrequency","blipEffect","staticLineSpeed","staticLineAOE","staticLineVariance","noiseXVariant","noiseYVariant","noiseFreq","shuffleBlipOffset","shuffleBlipChance","syncWarpThresh","syncWarpVariance"],t=0;e.length>t;t++)Ad.proxyVars[e[t]]=Ad.variables[e[t]];Ad.adMain.addListeners(),Ad.dynContent.setDynamic(),Ad.dom.adMain.style.display="block",stopAndHideLoader(),Ad.goTo(1,0)},Ad.adMain.addListeners=function(){Ad.dom.coverallBtn.addEventListener("click",Ad.adMain.bgExitHandler,!1)},Ad.adMain.bgExitHandler=function(){Ad.log("button clicked "+Ad.dynamicContent.Reporting_Label),Enabler.counter(Ad.dynamicContent.Reporting_Label+" click-through",!0),Enabler.exit("bipExit"),Ad.killAll()},Ad.adMain.setupDOM=function(){var e=["adMain","dynContent","coverallBtn","headline","cta","img","dynamicCanvas","bg","logo","bgNoise","containerVid","ctaVid","vidPoster","tint","trailerSuperLoop","trailerVidContainer"];Ad.utils.getDomRefs(e)},Ad.adMain.setAllCanvas=function(){Ad.log("adMain.setAllCanvas"),Ad.dom.dynamicCanvas.width=Ad.config.width,Ad.dom.dynamicCanvas.height=Ad.config.height,Ad.dom.ctx=Ad.dom.dynamicCanvas.getContext("2d"),Ad.cVars={staging:Ad.adMain.newCanvas(),bg:Ad.adMain.newCanvas(),frame1:Ad.adMain.newCanvas(1),frame2:Ad.adMain.newCanvas(2),frame3:Ad.adMain.newCanvas(3),frame4:Ad.adMain.newCanvas(4)}},Ad.adMain.newCanvas=function(e,t,i){var a=document.createElement("canvas");a.width=i||Ad.config.width,a.height=t||Ad.config.height;var d=a.getContext("2d");return d.font=Ad.variables.fontSize+"pt Times New Roman",d.fillStyle=Ad.variables.copyFill,{canvas:a,ctx:d,index:e}};var Ad=Ad||{};Ad.dynContent=Ad.dynContent||{},Ad.dynContent.getDynamic=function(){Ad.log("adMain.getDynamic"),Enabler.setProfileId(1051643);var e={};e.fourCreative_hunted_liveValues_Live=[{}],e.fourCreative_hunted_liveValues_Live[0]._id=0,e.fourCreative_hunted_liveValues_Live[0].Unique_ID=1,e.fourCreative_hunted_liveValues_Live[0].Reporting_Label="Generic",e.fourCreative_hunted_liveValues_Live[0].Keyword=["Generic"],e.fourCreative_hunted_liveValues_Live[0].Tip="Get offline now.",e.fourCreative_hunted_liveValues_Live[0].Strapline="Could you go on the run?",e.fourCreative_hunted_liveValues_Live[0].Show_Title="Hunted",e.fourCreative_hunted_liveValues_Live[0].Pre_TX_Ep_1_Dated1="Pre_TX_Ep_1_Dated1",e.fourCreative_hunted_liveValues_Live[0].Pre_TX_Ep1_Dated2="Pre_TX_Ep1_Dated2",e.fourCreative_hunted_liveValues_Live[0].Tomorrow_TX_Ep1="Tomorrow_TX_Ep1",e.fourCreative_hunted_liveValues_Live[0].Day_of_TX_Ep1="Day_of_TX_Ep1",e.fourCreative_hunted_liveValues_Live[0].Post_TX_Ep1="This is Dynamic!!",e.fourCreative_hunted_liveValues_Live[0].Tip_Pt_Size_Billboard="50",e.fourCreative_hunted_liveValues_Live[0].Tip_Pt_Size_DoubleMPU="20",e.fourCreative_hunted_liveValues_Live[0].Tip_Pt_Size_MPU="21",e.fourCreative_hunted_liveValues_Live[0].Default=!0,e.fourCreative_hunted_liveValues_Live[0].Active=!0,Enabler.setDevDynamicContent(e),Ad.dynamicContent=dynamicContent.fourCreative_hunted_liveValues_Live[0]},Ad.dynContent.setDynamic=function(){Ad.log("dynContent.setDynamic"),Ad.cVars.frame1.ctx.font=Ad.dynamicContent.Tip_Pt_Size_Billboard+"pt Times New Roman",Ad.utils.wrapText(Ad.cVars.frame1.ctx,Ad.dynamicContent.Tip,Ad.config.width*Ad.variables.wrapWidth,Ad.dynamicContent.Tip_Pt_Size_Billboard,!0),Ad.cVars.frame2.ctx.font=Ad.dynamicContent.Tip_Pt_Size_Billboard+"pt Times New Roman",Ad.utils.wrapText(Ad.cVars.frame2.ctx,Ad.dynamicContent.Strapline,Ad.config.width*Ad.variables.wrapWidth,Ad.dynamicContent.Tip_Pt_Size_Billboard,!0),Ad.cVars.frame3.ctx.font=Ad.variables.f3TextSize+"pt Times New Roman",Ad.utils.wrapText(Ad.cVars.frame3.ctx,Ad.dynamicContent.Show_Title,422,Ad.variables.f3TextSize,!0,"centered",[400,50]),Ad.cVars.frame3.ctx.font=Ad.variables.f3TXTextSize+"pt Times New Roman",Ad.utils.wrapText(Ad.cVars.frame3.ctx,Ad.dateLogic.outcome.txCopyLine,422,Ad.variables.f3TXTextSize,!0,"centered",[400,150]),Ad.cVars.frame3.ctx.drawImage(Ad.dom.logo,850,60,100,130)};var Ad=Ad||{};Ad.utils=Ad.utils||{},Ad.log=function(e){Ad.config.debugMode&&window.console&&console.log("",e)},Ad.utils.fadeIn=function(e,t,i){function a(){e.style.opacity=r,i>=r&&(r+=n,window.setTimeout(a,20))}var d=t/20,n=1/d;i||(i=1);var r=0;a()},Ad.utils.alpha=function(e,t){for(var i=0;t.length>i;i++)t[i].style.opacity=e},Ad.utils.getDomRefs=function(e){for(var t=0;e.length>t;t++)Ad.dom[e[t]]=document.getElementById(e[t])},Ad.goTo=function(e,t){return document[Ad.config.visibleFlag]?(Ad.killAll(),!1):(stepTimer=setTimeout(function(){Ad.config.adRunning&&Ad.doStep(e)},t),void 0)},Ad.utils.randomNum=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},Ad.utils.hide=function(e){for(var t=0;e.length>t;t++)e[t].style.display="none"},Ad.utils.show=function(e){for(var t=0;e.length>t;t++)e[t].style.display="block"},Ad.utils.wrapText=function(e,t,i,a,d,n,r){function o(e,t){var a=i-t,d=f+l;if(a>0){var r=n||Ad.variables.textAlign;"stagger"==r?d=Ad.utils.randomNum(d,d+a):"centered"==r&&(d+=a/2)}return d}function s(e,t,i){m.ctx.globalAlpha=Ad.variables.copyRgbOpacity;for(var a=0;Ad.variables.copyRgbColours.length>a;a++){var d=Ad.utils.randomNum(-Ad.variables.copyRgbOffset,Ad.variables.copyRgbOffset),n=Ad.utils.randomNum(-Ad.variables.copyRgbOffset,Ad.variables.copyRgbOffset);m.ctx.fillStyle=Ad.variables.copyRgbColours[a],m.ctx.fillText(e,t+d,i+n)}m.ctx.fillStyle=Ad.variables.copyFill,m.ctx.globalAlpha=Ad.variables.copyAlpha}a=parseInt(a,10),i-=Ad.variables.f1XOffset,r=r||[];var l=r[0]||0,c=r[1]||0,A=t.split(" "),u="",p=a,f=Ad.variables.f1XOffset,m=Ad.adMain.newCanvas("null");m.ctx.font=a+"pt Times New Roman";for(var g=0;A.length>g;g++){var v=u+A[g]+" ",b=e.measureText(v),T=b.width;if(T>i&&g>0){var h=o(u,T);d&&s(u,h,p),m.ctx.fillText(u,h,p),u=A[g]+" ",p+=a+Ad.variables.copyLineSpace}else u=v}var h=o(u,T);d&&s(u,h,p),m.ctx.fillText(u,h,p);var y=Ad.config.height/2-p/2;c&&(y=c),e.drawImage(m.canvas,0,y)};var Ad=Ad||{};Ad.effectVHS=Ad.effectVHS||{},Ad.effectVHS.deliberateAnim=!1,Ad.effectVHS.deliberateAnims=[],Ad.effectVHS.generateImage=function(){if(Ad.animLoop.clearStage(),Ad.variables.includeStaticLine&&Ad.staticLine.staticLineUpdate(),Ad.effectVHS.deliberateAnim)for(var e=0;Ad.effectVHS.deliberateAnims.length>e;e++)Ad.effectVHS.deliberateAnims[e].loop();else if(Ad.config.curCanvas){var t=Ad.proxyVars.curX||0,i=Ad.proxyVars.curY||0;Ad.cVars.staging.ctx.drawImage(Ad.config.curCanvas.canvas,t,i,Ad.config.curCanvas.canvas.width,Ad.config.curCanvas.canvas.height)}Ad.variables.shuffleBlip&&Ad.blips.shuffleBlip(),Ad.blips.checkForBlip(),Ad.effectVHS.wiggleImage()},Ad.effectVHS.wiggleImage=function(){Ad.variables.includeNoise;var e=Ad.proxyVars.maxXVariant,t=Ad.proxyVars.maxYVariant;Ad.proxyVars.noiseXVariant,Ad.proxyVars.noiseYVariant,Ad.proxyVars.noiseFreq,Ad.proxyVars.wiggleBiasX;var i=Ad.proxyVars.chunksize,a=Ad.cVars.staging.canvas.width,d=Ad.cVars.staging.canvas.height,n=d/i;Ad.variables.includeStaticLine&&Ad.staticLine.staticLineEffect();for(var r=0;n>r;r++){var o,s,l=1;if(Ad.staticLine.staticEffectArea["chunk"+r]){var c=Ad.variables.staticLineStepVal;l=Ad.staticLine.staticEffectArea["chunk"+r];var A=Ad.proxyVars.staticLineVariance;o=c*Ad.utils.randomNum(l-A,l+A),s=r+Ad.utils.randomNum(-t,t)}else o=Ad.utils.randomNum(-e,e),s=r+Ad.utils.randomNum(-t,t);Ad.dom.ctx.drawImage(Ad.cVars.staging.canvas,0,r*i,a,i,o,s*i,a,i)}};var Ad=Ad||{};Ad.staticLine=Ad.staticLine||{},Ad.staticLine.staticLineUpdate=function(){var e=Ad.variables.staticLineSpeed,t=Ad.variables.staticLineStart,i=Ad.variables.staticLineEnd||Ad.config.height;Ad.variables.chunksize;var a=Ad.config.width,d=0,n=100;Ad.proxyVars.staticChance=Ad.proxyVars.staticChance||Ad.variables.staticRandomChance,Ad.variables.staticLineRandom&&(n=Ad.proxyVars.staticChance,d=Ad.utils.randomNum(0,100)),Ad.staticLine.curStaticY=Ad.staticLine.curStaticY||t,n>d?Ad.staticLine.curStaticY-=e/100:Ad.staticLine.curStaticY+=e/100,Ad.variables.staticLineVisible&&(Ad.cVars.staging.ctx.fillStyle=Ad.variables.copyFill,Ad.cVars.staging.ctx.fillRect(0,Ad.staticLine.curStaticY,a,1)),Ad.staticLine.curStaticY>i&&"down"==Ad.variables.currentStaticDir?(Ad.proxyVars.staticChance=100-Ad.proxyVars.staticChance,Ad.variables.currentStaticDir="up"):t>Ad.staticLine.curStaticY&&"up"==Ad.variables.currentStaticDir&&(Ad.proxyVars.staticChance=100-Ad.proxyVars.staticChance,Ad.variables.currentStaticDir="down")},Ad.staticLine.staticLineEffect=function(){Ad.staticLine.staticEffectArea={};for(var e=Ad.variables.staticLineAOE/2,t=0;Ad.variables.staticLineAOE>t;t++){var i=Math.round(Ad.staticLine.curStaticY)+t-e,a=t-e,d=e-Math.abs(a);Ad.staticLine.staticEffectArea["chunk"+i]=d}};var Ad=Ad||{};Ad.blips=Ad.blips||{},Ad.blips.checkForBlip=function(){var e=Ad.variables.blipAffect,t=Ad.proxyVars.blipEffect,i=Ad.proxyVars.blipFrequency,a=Ad.variables.blipLength;if(Ad.variables.isBlip){if(Ad.variables.frameCounter>=Ad.blips.originVal.stopTime){for(var d=0;e.length>d;d++)Ad.proxyVars[e[d]]=Ad.variables[e[d]];Ad.variables.isBlip=!1}}else{var n=Ad.utils.randomNum(0,100);if(i>n){Ad.variables.isBlip=!0;for(var d=0;e.length>d;d++)Ad.blips.originVal=Ad.blips.originVal||{},Ad.blips.originVal[e[d]]=Ad.variables[e[d]],Ad.blips.originVal.stopTime=Ad.variables.frameCounter+a,Ad.proxyVars[e[d]]*=t}}},Ad.blips.shuffleBlip=function(){var e=Ad.utils.randomNum(0,100);if(Ad.proxyVars.shuffleBlipChance>e){Ad.proxyVars.curX,Ad.proxyVars.curY;var t=Ad.proxyVars.shuffleBlipOffset;Ad.proxyVars.curX=Ad.utils.randomNum(-t,t),Ad.proxyVars.curY=Ad.utils.randomNum(-t,t)}};var Ad=Ad||{};Ad.effectBg=Ad.effectBg||{},Ad.effectBg.generateImage=function(){0===Ad.variables.frameCounter%Ad.variables.bgAnimFreq&&("splice"==Ad.variables.bgAnimType?Ad.effectBg.spliceBg():"warp"==Ad.variables.bgAnimType?(Ad.cVars.bg.ctx.clearRect(0,0,Ad.config.width,Ad.config.height),Ad.effectBg.syncWarpBG()):(Ad.cVars.bg.ctx.fillStyle=Ad.variables.bgFill,Ad.cVars.bg.ctx.fillRect(0,0,Ad.cVars.bg.canvas.width,Ad.cVars.bg.canvas.height))),Ad.dom.ctx.shadowColor=Ad.variables.bgFill,Ad.dom.ctx.shadowBlur=5,Ad.dom.ctx.shadowOffsetX=0,Ad.dom.ctx.shadowOffsetY=0,Ad.dom.ctx.drawImage(Ad.cVars.bg.canvas,0,0,Ad.cVars.bg.canvas.width,Ad.cVars.bg.canvas.height),Ad.dom.ctx.shadowBlur=0,Ad.dom.ctx.shadowOffsetX=0,Ad.dom.ctx.shadowOffsetY=0},Ad.effectBg.spliceBg=function(){var e=Ad.variables.spliceChunkSize,t=Ad.config.height/e;Ad.cVars.bg.ctx.clearRect(0,0,Ad.config.width,Ad.config.height),Ad.cVars.bg.ctx.fillStyle=Ad.variables.bgFill;for(var i=0;t>i;i++){var a=Ad.variables.spliceVariation,d=Ad.utils.randomNum(-a,a);Ad.cVars.bg.ctx.fillRect(d,i*e,Ad.config.width,e)}},Ad.effectBg.syncWarpBG=function(){var e=Ad.proxyVars.syncWarpThresh,t=Ad.proxyVars.syncWarpVariance,i=Ad.utils.randomNum(e-t,e+t);Ad.cVars.bg.ctx.beginPath(),Ad.cVars.bg.ctx.moveTo(0,0),Ad.cVars.bg.ctx.bezierCurveTo(0,Ad.staticLine.curStaticY,i,Ad.staticLine.curStaticY-20,i/2,Ad.staticLine.curStaticY+10,0,Ad.staticLine.curStaticY),Ad.cVars.bg.ctx.lineTo(0,Ad.config.height),Ad.cVars.bg.ctx.lineTo(Ad.config.width-i,Ad.config.height),Ad.testVar1=Ad.testVar1||50,Ad.testVar2=Ad.testVar2||5,Ad.cVars.bg.ctx.bezierCurveTo(Ad.config.width-i,Ad.staticLine.curStaticY+Ad.testVar1,Ad.config.width,Ad.staticLine.curStaticY+Ad.testVar2,Ad.config.width,Ad.staticLine.curStaticY-Ad.testVar2,Ad.config.width-i,Ad.staticLine.curStaticY-Ad.testVar1),Ad.cVars.bg.ctx.lineTo(Ad.config.width-i/2,0),Ad.cVars.bg.ctx.lineTo(0,0),Ad.cVars.bg.ctx.closePath(),Ad.cVars.bg.ctx.fillStyle=Ad.variables.bgFill,Ad.cVars.bg.ctx.fill();var a=Ad.variables.includeNoise,d=Ad.proxyVars.noiseFreq,n=Ad.utils.randomNum(0,100);d>n&&a&&Ad.effectBg.bgNoise()},Ad.effectBg.bgNoise=function(){var e=50,t=Ad.proxyVars.noiseXVariant,i=Ad.proxyVars.noiseYVariant;Ad.cVars.bg.ctx.globalCompositeOperation="source-atop",Ad.cVars.bg.ctx.globalAlpha=Ad.variables.noiseAlpha;for(var a=0;e>a;a++){var d=Ad.utils.randomNum(-t,t),n=a+Ad.utils.randomNum(-i,i);Ad.effectBg.noiseImg||(Ad.effectBg.noiseLoaded=!1,Ad.effectBg.noiseImg=new Image,Ad.effectBg.noiseImg.src="img_bgNoise.png",Ad.effectBg.noiseImg.onload=function(){Ad.effectBg.noiseLoaded=!0}),Ad.effectBg.noiseLoaded&&Ad.cVars.bg.ctx.drawImage(Ad.effectBg.noiseImg,d,n*e,Ad.config.width,e)}Ad.cVars.bg.ctx.globalAlpha=1,Ad.cVars.bg.ctx.globalCompositeOperation="source-over"},Ad.effectBg.warpBG=function(){function e(e,t){if(!prevYs[e]){var i=Ad.config.height/(4*Ad.variables.bgWarpCntrPoints),a=e*i;t&&(a=(e-4*Ad.variables.bgWarpCntrPoints)*i),prevYs[e]={curYDir:a,curYVal:a,yMin:a-Ad.variables.bgWarpThresholdY,yMax:a+Ad.variables.bgWarpThresholdY}}return prevYs[e].curYDir==prevYs[e].curYVal?prevYs[e].curYDir=Ad.utils.randomNum(prevYs[e].yMin,prevYs[e].yMax):prevYs[e].curYDir>prevYs[e].curYVal?prevYs[e].curYVal++:prevYs[e].curYDir<prevYs[e].curYVal&&prevYs[e].curYVal--,prevYs[e].curYVal}function t(e,t){prevXs[e]||(prevXs[e]={curXDir:0,curXVal:0},t&&(prevXs[e].curXVal=Ad.config.width,prevXs[e].curXDir=Ad.config.width));var i=a;return t&&(i=d),prevXs[e].curXDir==prevXs[e].curXVal?prevXs[e].curXDir=Ad.utils.randomNum(i[0],i[1]):prevXs[e].curXDir>prevXs[e].curXVal?prevXs[e].curXVal++:prevXs[e].curXDir<prevXs[e].curXVal&&prevXs[e].curXVal--,prevXs[e].curXVal}Ad.cVars.bg.canvas.height;var i=Ad.cVars.bg.canvas.width;Ad.config.height;var a=[-Ad.variables.bgWarpThresholdX,Ad.variables.bgWarpThresholdX],d=[Ad.config.width-Ad.variables.bgWarpThresholdX,Ad.config.width+Ad.variables.bgWarpThresholdX];Ad.cVars.bg.ctx.beginPath(),Ad.cVars.bg.ctx.moveTo(0,0);for(var n=1,i=0;Ad.variables.bgWarpCntrPoints>i;i++)Ad.cVars.bg.ctx.bezierCurveTo(t(n),e(n),t(n+1),e(n+1),t(n+2),e(n+2),t(n+3),e(n+3)),n+=4;Ad.cVars.bg.ctx.lineTo(0,Ad.config.height),Ad.cVars.bg.ctx.lineTo(Ad.config.width,Ad.config.height),n=2*n;for(var r=0;Ad.variables.bgWarpCntrPoints>r;r++)Ad.cVars.bg.ctx.bezierCurveTo(t(n,!0),e(n,!0),t(n-1,!0),e(n-1,!0),t(n-2,!0),e(n-2,!0),t(n-3,!0),e(n-3,!0)),n-=4;Ad.cVars.bg.ctx.lineTo(Ad.config.width,0),Ad.cVars.bg.ctx.lineTo(0,0),Ad.cVars.bg.ctx.closePath(),Ad.cVars.bg.ctx.globalCompositeOperation="destination-atop",Ad.cVars.bg.ctx.fillStyle=Ad.variables.bgFill,Ad.cVars.bg.ctx.fill(),Ad.cVars.bg.ctx.globalCompositeOperation="source-over"};var Ad=Ad||{};Ad.timeline=Ad.timeline||{},Ad.doStep=function(e){switch(Ad.log("do step "+e),e){case 1:Ad.animLoop.init(),Ad.timeline.curTime=0,Ad.timeline.traceTime(),Ad.goTo(2,500);break;case 2:new Anim(Ad.cVars.staging,Ad.cVars.frame1,"AnimIn"),Ad.goTo(3,3500);break;case 3:new Anim(Ad.cVars.staging,Ad.cVars.frame1,"AnimOut"),Ad.goTo(4,500);break;case 4:new Anim(Ad.cVars.staging,Ad.cVars.frame2,"AnimIn"),Ad.goTo(5,2500);break;case 5:new Anim(Ad.cVars.staging,Ad.cVars.frame2,"AnimOut"),Ad.reduction(),Ad.goTo(6,500);break;case 6:Ad.utils.show([Ad.dom.containerVid]),Ad.utils.fadeIn(Ad.dom.containerVid,.4,1),superTween.superLoop(Ad.dom.trailerSuperLoop,"infinite",{numSteps:28,stepSize:201,interval:100}),Ad.goTo(7,500);break;case 7:new Anim(Ad.cVars.staging,Ad.cVars.frame3,"AnimIn"),Ad.goTo(100,5500);break;case 100:Ad.config.curLoop>=Ad.config.maxLoop?(Ad.log("ad loop "+Ad.config.curLoop+" of "+Ad.config.maxLoop+" completed in "+Ad.timeline.curTime/1e3+"s"),clearTimeout(Ad.timeline.traceTimer),Ad.proxyVars.maxXVariant=.1,Ad.variables.maxXVariant=.1,Ad.proxyVars.shuffleBlipOffset=0,Ad.dom.ctx.globalAlpha=.2,Ad.dom.ctx.drawImage(Ad.dom.bgNoise,0,0),Ad.dom.ctx.globalAlpha=1,superTween.killAll(),Ad.config.adRunning=!1):(Ad.log("finished loop "+Ad.config.curLoop+" of "+Ad.config.maxLoop),Ad.config.curLoop++,Ad.goTo(2,500))
}},Ad.killAll=function(){Ad.log("killAll"),clearTimeout(Ad.timeline.traceTimer),Ad.dcVid.stopVid(),superTween.killAll(),Ad.proxyVars.syncWarpThresh=0,Ad.config.adRunning=!1,Ad.animLoop.clearCanvas(),Ad.effectBg.generateImage(),Ad.dom.ctx.globalAlpha=.2,Ad.dom.ctx.drawImage(Ad.dom.bgNoise,0,0),Ad.dom.ctx.globalAlpha=1,Ad.dom.ctx.font=Ad.variables.f3TextSize+"pt Times New Roman",Ad.utils.wrapText(Ad.dom.ctx,Ad.dynamicContent.Show_Title,422,Ad.variables.f3TextSize,!1,"centered",[400,50]),Ad.dom.ctx.font=Ad.variables.f3TXTextSize+"pt Times New Roman",Ad.utils.wrapText(Ad.dom.ctx,Ad.dateLogic.outcome.txCopyLine,422,Ad.variables.f3TXTextSize,!1,"centered",[400,150]),Ad.dom.ctx.drawImage(Ad.dom.logo,850,60,100,130),Ad.utils.show([Ad.dom.containerVid]),Ad.utils.alpha(1,[Ad.dom.containerVid])},Ad.reduction=function(){function e(){a=!1;for(var e=0;i.length>e;e++)Ad.proxyVars[i[e]]>0&&(Ad.proxyVars[i[e]]-=1,t()),0>Ad.proxyVars[i[e]]&&(Ad.proxyVars[i[e]]+=1,t())}function t(){a||setTimeout(e,150),a=!0}Ad.proxyVars.blipFrequency=0,Ad.proxyVars.maxXVariant=.1,Ad.variables.maxXVariant=.1,Ad.proxyVars.shuffleBlipOffset=1;var i=["syncWarpThresh"],a=!1;e()},Ad.timeline.traceTime=function(){Ad.timeline.curTime+=100,Ad.timeline.traceTimer=setTimeout(Ad.timeline.traceTime,100)};var Ad=Ad||{};Ad.animLoop=Ad.animLoop||{},Ad.animLoop.init=function(){Ad.log("animLoop.init"),Ad.config.adRunning&&(window.requestAnimationFrame?requestAnimationFrame(Ad.animLoop.theLoop):setTimeout(Ad.animLoop.theLoop,16))},Ad.animLoop.theLoop=function(){Ad.variables.frameCounter++,Ad.config.adRunning&&(Ad.animLoop.clearCanvas(),Ad.effectBg.generateImage(),Ad.effectVHS.generateImage(),window.requestAnimationFrame?requestAnimationFrame(Ad.animLoop.theLoop):setTimeout(Ad.animLoop.theLoop,16))},Ad.animLoop.clearCanvas=function(){Ad.dom.ctx.clearRect(0,0,Ad.config.width,Ad.config.height)},Ad.animLoop.clearStage=function(){Ad.cVars.staging.ctx.clearRect(0,0,Ad.config.width,Ad.config.height)};var Ad=Ad||{};Ad.politeLoad=Ad.politeLoad||{},Ad.politeLoad={imgCounter:0,imgLoaded:!1,jsTimeout:null,loadTimer:null,curTime:0,maxTime:1e4,adTimeout:!1},Ad.politeLoad.start=function(){function e(){var e=document.createElement("canvas"),t=!(!e.getContext||!e.getContext("2d"));return t?!0:!1}Ad.politeLoad.log("Ad.politeLoad.start"),document.hidden!==void 0?Ad.config.visibleFlag="hidden":document.mozHidden!==void 0?Ad.config.visibleFlag="mozHidden":document.msHidden!==void 0?Ad.config.visibleFlag="msHidden":document.webkitHidden!==void 0&&(Ad.config.visibleFlag="webkitHidden"),e()?1==Ad.config.onloadFired?(Ad.politeLoad.log("Injecting child now"),Ad.politeLoad.loadImages()):window.addEventListener("load",function(){Ad.config.onloadFired=!0,Ad.politeLoad.loadImages()}):Ad.politeLoad.loadTimeout()},Ad.politeLoad.log=function(){window.console&&"object"==typeof console&&window.console.log},Ad.politeLoad.loadImages=function(){Ad.politeLoad.log("loadImages");for(var e=document.getElementsByTagName("img"),t=0;e.length>t;t++){var i=e[t].getAttribute("data-src");e[t].setAttribute("src",i),e[t].onload=function(){Ad.politeLoad.imgCounter++,Ad.politeLoad.log("loaded image "+Ad.politeLoad.imgCounter+" of "+e.length),Ad.politeLoad.imgCounter==e.length&&(Ad.politeLoad.imgLoaded=!0,Ad.politeLoad.launchChild())}}},Ad.politeLoad.launchChild=function(){Ad.politeLoad.log("launchChild"),clearTimeout(Ad.politeLoad.loadTimer),Enabler.loadModule(studio.module.ModuleId.RAD_VIDEO,function(){Ad.adMain.politeInit()})},Ad.politeLoad.loadTimeout=function(){Ad.politeLoad.adTimeout=!0,clearTimeout(Ad.politeLoad.jsTimeout),Ad.politeLoad.log(""),Ad.politeLoad.log("there was a problem loading external files"),Ad.politeLoad.log(""),clearTimeout(Ad.politeLoad.loadTimer),stopAndHideLoader();var e=document.createElement("div");e.setAttribute("class","backupGif"),document.getElementsByTagName("body")[0].appendChild(e),document.getElementById("coverallBtn").addEventListener("click",function(){Enabler.exit("backupExit")})},Ad.politeLoad.traceTime=function(){Ad.politeLoad.curTime+=100,Ad.politeLoad.log(Ad.politeLoad.curTime),Ad.politeLoad.curTime>=Ad.politeLoad.maxTime?Ad.politeLoad.loadTimeout():Ad.politeLoad.loadTimer=setTimeout(function(){Ad.politeLoad.traceTime()},100)},Ad.politeLoad.enablerInit=function(){Ad.politeLoad.log("politeLoad.enablerInit"),Enabler.isPageLoaded()?Ad.politeLoad.start():Enabler.addEventListener(studio.events.StudioEvent.PAGE_LOADED,Ad.politeLoad.enablerInit)},Enabler.isInitialized()?Ad.politeLoad.enablerInit():Enabler.addEventListener(studio.events.StudioEvent.INIT,Ad.politeLoad.enablerInit),Ad.config.onloadFired=!0,Ad.politeLoad.traceTime();
