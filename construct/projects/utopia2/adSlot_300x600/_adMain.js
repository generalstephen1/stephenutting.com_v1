var Ad = Ad || {};	// global ad config	Ad.config = {		width: 300,		height: 600,		debugMode: true,		adRunning: true	};	// all dom elements in here please	Ad.dom = {};	//classes - eyeMove, eyeBreakup, etc	Ad.class = {};	Ad.start = function(){		Ad.log("Ad.start");		imagesLoaded( document.querySelectorAll('img'), function(instance){			stopAndHideLoader();			//do the ad			Ad.init();			//wait for video module, then do step 1			Enabler.loadModule(studio.module.ModuleId.VIDEO, function(){				Ad.doStep(1);			});		});	}	Ad.init = function(){		//set up objects		Ad.dateLogic = new Ad.class.DateLogic();		Ad.dcVid = new Ad.class.DcVid();		//misc		Ad.dom.endFrame = document.getElementById('endFrame');		Ad.dom.coverallBtn = document.getElementById('coverallBtn');		//imagery stuff		Ad.dom.strapline = document.getElementById('strapline');		Ad.dom.lockup = document.getElementById('lockup');		Ad.dom.eye = document.getElementById('eye');		Ad.dom.txStartsTonight = document.getElementById('txStartsTonight');		//ctas		Ad.dom.ctaExperience = document.getElementById('ctaExperience');		Ad.dom.ctaBip = document.getElementById('ctaBip');		//video stuff		//trailer is declared in _dateLogic.js and put into Ad.activeVideo		Ad.dom.ctaVid = document.getElementById('ctaVid');		Ad.dom.tint = document.getElementById('tint');		Ad.dom.container360 = document.getElementById('container360');		//set up default exit		Ad.dom.coverallBtn.addEventListener('click', function(){			Ad.killAll();			Enabler.exit("bipExit");		});		//set up the experience exit		Ad.dom.ctaExperience.addEventListener('click', function(){			Ad.log('experience exit');			Ad.killAll();			Enabler.exit("experienceExit");		});	}	Ad.doStep = function(whatStep){		console.log("[----]whatStep = "+whatStep);		switch(whatStep){			case 1:				//set up the active video, attach reporting id and set up listeners on the video				//we do this here because if the user exits before the endscreen they will see				//the endframe and so should still be able to use the video				if (Ad.dateLogic.showExperience){					Ad.dom.ctaExperience.style.display = "block";				}				Ad.dateLogic.setupActiveVideo();				Ad.dcVid.addListeners();				Ad.dom.endFrame.style.display = "block";				Ad.fadeIn(Ad.dom.strapline);				window.setTimeout(function(){					Ad.fadeIn(Ad.dom.lockup);				}, 300);				window.setTimeout(function(){					Ad.fadeIn(Ad.dom.eye);				}, 600);				//show active cta				window.setTimeout(function(){					Ad.fadeIn(Ad.dom.txStartsTonight);				}, 900);				//show active cta				window.setTimeout(function(){					Ad.fadeIn(Ad.dom.ctaExperience);				}, 1200);				//show active cta				window.setTimeout(function(){					Ad.fadeIn(Ad.dom.ctaBip);				}, 1500);				Ad.goTo(2, 20000);			break;			case 2:				Ad.dcVid.stop360();			break;		}	}	Ad.fadeIn = function(elem) {		var i=0;		if (Ad.config.adRunning){			fade();		}		function fade(){			//console.log('(***) ' + i);			if (Ad.config.adRunning){				elem.style.opacity = i;			}			if (i<=1){				i += 0.08;				window.setTimeout(fade, 25);			}		}	}	Ad.goTo = function(step, duration){		stepTimer = setTimeout(function(){			if (Ad.config.adRunning){				Ad.doStep(step);			}		}, duration);	}	Ad.killAll = function(){		//stop stepTimer		Ad.config.adRunning = false;		//stop the video + 360		Ad.dcVid.stopVid();		Ad.dcVid.stop360();		//show endframe immeditely		Ad.dom.endFrame.style.display = "block";		Ad.dom.strapline.style.opacity = 1;		Ad.dom.lockup.style.opacity = 1;		Ad.dom.eye.style.opacity = 1;		Ad.dom.txStartsTonight.style.opacity = 1;		Ad.dom.ctaBip.style.opacity = 1;		if (Ad.dateLogic.showExperience){			Ad.dom.ctaExperience.style.display = "block";			Ad.dom.ctaExperience.style.opacity = "1";		}	}	Ad.log = function(message){		if (Ad.config.debugMode){			console.log("[----] "+message);		}	}	if (!Enabler.isInitialized()) {		 console.log("[----]waiting for enabler")		 Enabler.addEventListener(studio.events.StudioEvent.INIT, Ad.start);	} else {		console.log("[----]Enabler initialized");		Ad.start();	}